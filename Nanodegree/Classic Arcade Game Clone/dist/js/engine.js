var Engine=function(e){function n(){if("started"===gameFlag){var e=Date.now(),a=(e-c)/1e3;g(a),o(),c=e}else"end"===gameFlag&&t();p.requestAnimationFrame(n)}function t(){d.fillStyle="red",d.fillRect(0,240,m.width,100),d.font="25pt Arial Black",d.textAlign="center",d.fillStyle="white",d.fillText("YOU WIN!",m.width/2,280),d.fillText("Refresh page to start a new game",m.width/2,320),d.strokeStyle="black",d.strokeText("YOU WIN!",m.width/2,280),d.strokeText("Refresh page to start a new game",m.width/2,320)}function a(){s(),c=Date.now(),n()}function g(e){i(e)}function i(e){allEnemies.forEach(function(n){n.update(e)}),allStones.forEach(function(n){n.update(e)}),player.update(e),key.update(e),door.update(e),princess.update(e)}function o(){var e,n,t=["images/grass-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png"],a=6,g=8;for(e=0;e<a;e++)for(n=0;n<g;n++)d.drawImage(Resources.get(t[e]),101*n,83*e);r()}function r(){allStones.forEach(function(e){e.render()}),allEnemies.forEach(function(e){e.render()}),door.render(),player.render(),key.render(),princess.render()}function s(){}var c,l=e.document,p=e.window,m=l.createElement("canvas"),d=m.getContext("2d");m.width=708,m.height=586,l.body.appendChild(m),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug_left.png","images/enemy-bug_right.png","images/enemy-bug_top.png","images/enemy-bug_bottom.png","images/char-boy.png","images/char-cat-girl.png","images/char-horn-girl.png","images/char-pink-girl.png","images/Rock.png","images/Key.png","images/Selector.png","images/bug_princess.png"]),Resources.onReady(a),e.ctx=d}(this);